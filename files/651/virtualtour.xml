<?xml version="1.0" encoding="UTF-8"?>
<!-- for xml compliance -->
<!-- Generated By Kolor Panotour 1.8.0 -->
<krpano version="1.0.8.14" logkey="false">
    <action name="mainloadpano">
		closepanoobjects();
		closeglobalobjects();
		ifnot(stopSequence === undefined,interruptAnimation(););
		loadpano(%1,NULL,NULL,BLEND(1));
	</action>
    <plugin name="gyro" url="virtualtourdata/graphics/gyro.js" devices="ipad|iphone" keep="true" enabled="true"/>
    <!--************** KrPano plugins and datas ***************************************************-->
    <plugin name="data" firstPanoHasBeenPlayed="false" keep="true"/>
    <!--************** Open the first pano ********************************************************-->
    <include url="virtualtour13.xml"/>
    <autorotate enabled="false"/>
    <!--************** Fonts **********************************************************************-->
    <textstyle name="DEFAULT" bold="false" font="Arial" fontsize="16" italic="false" textcolor="0xff000000"/>
    <!--************** Introduction ***************************************************************-->
    <action name="firstloadcompleteaction">
		if(plugin[data].firstPanoHasBeenPlayed==false,
			set(plugin[data].firstPanoHasBeenPlayed,true);
			set(autorotate.enabled,true);
		);
	</action>
    <!--************** Menu ***********************************************************************-->
    <plugin name="in" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(fov_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="virtualtourdata/graphics/menu/menu0.png" width="40" x="-160" y="10"/>
    <plugin name="out" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(fov_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="virtualtourdata/graphics/menu/menu1.png" width="40" x="-120" y="10"/>
    <plugin name="left" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(hlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="virtualtourdata/graphics/menu/menu2.png" width="40" x="-80" y="10"/>
    <plugin name="right" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(hlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="virtualtourdata/graphics/menu/menu3.png" width="40" x="-40" y="10"/>
    <plugin name="up" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(vlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="virtualtourdata/graphics/menu/menu4.png" width="40" x="0" y="10"/>
    <plugin name="down" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" ondown="set(vlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="virtualtourdata/graphics/menu/menu5.png" width="40" x="40" y="10"/>
    <plugin name="home" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="lookto(get(panoview.h),get(panoview.v),get(panoview.fov),smooth(100,20,50));" onout="" onover="" onovercrop="0|65|65|65" url="virtualtourdata/graphics/menu/menu6.png" width="40" x="80" y="10"/>
    <plugin name="openfs" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,true);" onout="" onover="" onovercrop="0|65|65|65" url="virtualtourdata/graphics/menu/menu7.png" width="40" x="120" y="10"/>
    <plugin name="closefs" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,false);" onout="" onover="" onovercrop="0|65|65|65" url="virtualtourdata/graphics/menu/menu8.png" visible="false" width="40" x="120" y="10"/>
    <plugin name="info" align="bottom" crop="0|0|65|65" height="prop" keep="true" onclick="displayHelp();" onout="" onover="" onovercrop="0|65|65|65" url="virtualtourdata/graphics/menu/menu9.png" width="40" x="160" y="10"/>
    <plugin name="helpScreen" align="center" customColor="true" keep="true" onclick="closeHelp();" url="virtualtourdata/graphics/menu/help.png" visible="false"/>
    <action name="displayHelp">
        set(plugin[helpScreen].visible,true);
        set(plugin[info].onclick,closeHelp();)
    </action>
    <action name="closeHelp">
        set(plugin[helpScreen].visible,false);
        set(plugin[info].onclick,displayHelp();)
    </action>
    <events onenterfullscreen="set(plugin[openfs].visible,false); set(plugin[closefs].visible,true);" onexitfullscreen="set(plugin[openfs].visible,true); set(plugin[closefs].visible,false);"/>
    <!--************** Plugin map *****************************************************************-->
    <plugin name="map" url="virtualtourdata/map/map.png" keep="true" align="lefttop" x="10" y="10" width="300" height="129" handcursor="false" onloaded="hidemapspot();" onclick="openmap"/>
    <plugin keep="true" visible="false" name="mapspot0" onclick="mainloadpano(virtualtour13.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Ресепция);" align="lefttop" edge="center" parent="map" x="65.0066%" y="69.9225%"/>
    <plugin keep="true" visible="false" name="mapspot1" onclick="mainloadpano(virtualtour0.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Женская раздевалка);" align="lefttop" edge="center" parent="map" x="79.4821%" y="60.3101%"/>
    <plugin keep="true" visible="false" name="mapspot2" onclick="mainloadpano(virtualtour11.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Мужская раздевалка);" align="lefttop" edge="center" parent="map" x="71.5803%" y="40%"/>
    <plugin keep="true" visible="false" name="mapspot3" onclick="mainloadpano(virtualtour12.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Мужская раздевалка);" align="lefttop" edge="center" parent="map" x="66.8842%" y="46.3878%"/>
    <plugin keep="true" visible="false" name="mapspot4" onclick="mainloadpano(virtualtour14.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(SPA салон);" align="lefttop" edge="center" parent="map" x="52.0584%" y="80.4651%"/>
    <plugin keep="true" visible="false" name="mapspot5" onclick="mainloadpano(virtualtour16.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(SPA салон);" align="lefttop" edge="center" parent="map" x="46.6799%" y="69.4574%"/>
    <plugin keep="true" visible="false" name="mapspot6" onclick="mainloadpano(virtualtour15.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(SPA салон);" align="lefttop" edge="center" parent="map" x="46.0159%" y="62.1705%"/>
    <plugin keep="true" visible="false" name="mapspot7" onclick="mainloadpano(virtualtour5.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Детский зал для индивидуальных занятий);" align="lefttop" edge="center" parent="map" x="51.5936%" y="50.6977%"/>
    <plugin keep="true" visible="false" name="mapspot8" onclick="mainloadpano(virtualtour4.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Детская комната);" align="lefttop" edge="center" parent="map" x="55.3121%" y="45.8915%"/>
    <plugin keep="true" visible="false" name="mapspot9" onclick="mainloadpano(virtualtour2.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Фитнес-бар);" align="lefttop" edge="center" parent="map" x="58.1673%" y="38.4496%"/>
    <plugin keep="true" visible="false" name="mapspot10" onclick="mainloadpano(virtualtour18.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Женская раздевалка);" align="lefttop" edge="center" parent="map" x="85.8566%" y="35.969%"/>
    <plugin keep="true" visible="false" name="mapspot11" onclick="mainloadpano(virtualtour17.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Женская раздевалка);" align="lefttop" edge="center" parent="map" x="84.5286%" y="45.2713%"/>
    <plugin keep="true" visible="false" name="mapspot12" onclick="mainloadpano(virtualtour1.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Йога);" align="lefttop" edge="center" parent="map" x="81.0093%" y="81.0853%"/>
    <plugin keep="true" visible="false" name="mapspot13" onclick="mainloadpano(virtualtour8.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Зал групповых занятий);" align="lefttop" edge="center" parent="map" x="90.3054%" y="67.2868%"/>
    <plugin keep="true" visible="false" name="mapspot14" onclick="mainloadpano(virtualtour7.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Зал восточных единоборств);" align="lefttop" edge="center" parent="map" x="17.6627%" y="71.1628%"/>
    <plugin keep="true" visible="false" name="mapspot15" onclick="mainloadpano(virtualtour6.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Кабинет функциональной диагностики);" align="lefttop" edge="center" parent="map" x="26.0292%" y="73.1783%"/>
    <plugin keep="true" visible="false" name="mapspot16" onclick="mainloadpano(virtualtour3.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext( Сайкл студия);" align="lefttop" edge="center" parent="map" x="36.8526%" y="57.0543%"/>
    <plugin keep="true" visible="false" name="mapspot17" onclick="mainloadpano(virtualtour10.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Кардиотеатр);" align="lefttop" edge="center" parent="map" x="25.6972%" y="46.3566%"/>
    <plugin keep="true" visible="false" name="mapspot18" onclick="mainloadpano(virtualtour9.xml);" url="virtualtourdata/graphics/spots/spot0.png" blingCounter="0" onhover="showtext(Тренажерный зал);" align="lefttop" edge="center" parent="map" x="24.5214%" y="20.7265%"/>
    <action name="showmapspot">
		set(  plugin[mapspot0].alpha  , 0);
		set(  plugin[mapspot0].visible, true);
		tween(plugin[mapspot0].alpha  , 1);
		set(  plugin[mapspot1].alpha  , 0);
		set(  plugin[mapspot1].visible, true);
		tween(plugin[mapspot1].alpha  , 1);
		set(  plugin[mapspot2].alpha  , 0);
		set(  plugin[mapspot2].visible, true);
		tween(plugin[mapspot2].alpha  , 1);
		set(  plugin[mapspot3].alpha  , 0);
		set(  plugin[mapspot3].visible, true);
		tween(plugin[mapspot3].alpha  , 1);
		set(  plugin[mapspot4].alpha  , 0);
		set(  plugin[mapspot4].visible, true);
		tween(plugin[mapspot4].alpha  , 1);
		set(  plugin[mapspot5].alpha  , 0);
		set(  plugin[mapspot5].visible, true);
		tween(plugin[mapspot5].alpha  , 1);
		set(  plugin[mapspot6].alpha  , 0);
		set(  plugin[mapspot6].visible, true);
		tween(plugin[mapspot6].alpha  , 1);
		set(  plugin[mapspot7].alpha  , 0);
		set(  plugin[mapspot7].visible, true);
		tween(plugin[mapspot7].alpha  , 1);
		set(  plugin[mapspot8].alpha  , 0);
		set(  plugin[mapspot8].visible, true);
		tween(plugin[mapspot8].alpha  , 1);
		set(  plugin[mapspot9].alpha  , 0);
		set(  plugin[mapspot9].visible, true);
		tween(plugin[mapspot9].alpha  , 1);
		set(  plugin[mapspot10].alpha  , 0);
		set(  plugin[mapspot10].visible, true);
		tween(plugin[mapspot10].alpha  , 1);
		set(  plugin[mapspot11].alpha  , 0);
		set(  plugin[mapspot11].visible, true);
		tween(plugin[mapspot11].alpha  , 1);
		set(  plugin[mapspot12].alpha  , 0);
		set(  plugin[mapspot12].visible, true);
		tween(plugin[mapspot12].alpha  , 1);
		set(  plugin[mapspot13].alpha  , 0);
		set(  plugin[mapspot13].visible, true);
		tween(plugin[mapspot13].alpha  , 1);
		set(  plugin[mapspot14].alpha  , 0);
		set(  plugin[mapspot14].visible, true);
		tween(plugin[mapspot14].alpha  , 1);
		set(  plugin[mapspot15].alpha  , 0);
		set(  plugin[mapspot15].visible, true);
		tween(plugin[mapspot15].alpha  , 1);
		set(  plugin[mapspot16].alpha  , 0);
		set(  plugin[mapspot16].visible, true);
		tween(plugin[mapspot16].alpha  , 1);
		set(  plugin[mapspot17].alpha  , 0);
		set(  plugin[mapspot17].visible, true);
		tween(plugin[mapspot17].alpha  , 1);
		set(  plugin[mapspot18].alpha  , 0);
		set(  plugin[mapspot18].visible, true);
		tween(plugin[mapspot18].alpha  , 1);
	</action>
    <action name="hidemapspot">
		set(plugin[mapspot0].visible,false);
		set(plugin[mapspot1].visible,false);
		set(plugin[mapspot2].visible,false);
		set(plugin[mapspot3].visible,false);
		set(plugin[mapspot4].visible,false);
		set(plugin[mapspot5].visible,false);
		set(plugin[mapspot6].visible,false);
		set(plugin[mapspot7].visible,false);
		set(plugin[mapspot8].visible,false);
		set(plugin[mapspot9].visible,false);
		set(plugin[mapspot10].visible,false);
		set(plugin[mapspot11].visible,false);
		set(plugin[mapspot12].visible,false);
		set(plugin[mapspot13].visible,false);
		set(plugin[mapspot14].visible,false);
		set(plugin[mapspot15].visible,false);
		set(plugin[mapspot16].visible,false);
		set(plugin[mapspot17].visible,false);
		set(plugin[mapspot18].visible,false);
	</action>
    <!-- close the map -->
    <action name="closemap">
		hidemapspot();
		set(plugin[map].onclick,openmap);
		set(plugin[map].width, 300);
		set(plugin[map].height, 129);
		set(plugin[map].align, lefttop);
		set(plugin[map].x    , 10);
		set(plugin[map].y    , 10);
	</action>
    <!-- open the map -->
    <action name="openmap">
		set(plugin[map].onclick, closemap);
		tween(plugin[map].height, 450, 0.5, easeoutquad);
		tween(plugin[map].width , 1044, 0.5, easeoutquad, showmapspot(););
		set(plugin[map].align, center);
		set(plugin[map].x    , 0);
		set(plugin[map].y    , 0);
	</action>
    <!-- Убрать выделение всех точек карты, кроме тех, что переданы параметрами -->
    <!-- Убрать выделение всех точек карты, если параметр не задан -->
    <action name="unselectmapspotsbutpassed">
		if (%1 != mapspot0,
				if(plugin[mapspot0].animated,
				set(plugin[mapspot0].frame           , 0);
				set(plugin[mapspot0].ypos            , 0);
				set(plugin[mapspot0].animationCounter, 0)
				txtadd(plugin[mapspot0].crop,'0|0|',get(plugin[mapspot0].framewidth),'|',get(plugin[mapspot0].frameheight));
			,
				set(plugin[mapspot0].blingCounter, 0)
			)
		);
		resetmapspot(mapspot0);
		if (%1 != mapspot1,
				if(plugin[mapspot1].animated,
				set(plugin[mapspot1].frame           , 0);
				set(plugin[mapspot1].ypos            , 0);
				set(plugin[mapspot1].animationCounter, 0)
				txtadd(plugin[mapspot1].crop,'0|0|',get(plugin[mapspot1].framewidth),'|',get(plugin[mapspot1].frameheight));
			,
				set(plugin[mapspot1].blingCounter, 0)
			)
		);
		resetmapspot(mapspot1);
		if (%1 != mapspot2,
				if(plugin[mapspot2].animated,
				set(plugin[mapspot2].frame           , 0);
				set(plugin[mapspot2].ypos            , 0);
				set(plugin[mapspot2].animationCounter, 0)
				txtadd(plugin[mapspot2].crop,'0|0|',get(plugin[mapspot2].framewidth),'|',get(plugin[mapspot2].frameheight));
			,
				set(plugin[mapspot2].blingCounter, 0)
			)
		);
		resetmapspot(mapspot2);
		if (%1 != mapspot3,
				if(plugin[mapspot3].animated,
				set(plugin[mapspot3].frame           , 0);
				set(plugin[mapspot3].ypos            , 0);
				set(plugin[mapspot3].animationCounter, 0)
				txtadd(plugin[mapspot3].crop,'0|0|',get(plugin[mapspot3].framewidth),'|',get(plugin[mapspot3].frameheight));
			,
				set(plugin[mapspot3].blingCounter, 0)
			)
		);
		resetmapspot(mapspot3);
		if (%1 != mapspot4,
				if(plugin[mapspot4].animated,
				set(plugin[mapspot4].frame           , 0);
				set(plugin[mapspot4].ypos            , 0);
				set(plugin[mapspot4].animationCounter, 0)
				txtadd(plugin[mapspot4].crop,'0|0|',get(plugin[mapspot4].framewidth),'|',get(plugin[mapspot4].frameheight));
			,
				set(plugin[mapspot4].blingCounter, 0)
			)
		);
		resetmapspot(mapspot4);
		if (%1 != mapspot5,
				if(plugin[mapspot5].animated,
				set(plugin[mapspot5].frame           , 0);
				set(plugin[mapspot5].ypos            , 0);
				set(plugin[mapspot5].animationCounter, 0)
				txtadd(plugin[mapspot5].crop,'0|0|',get(plugin[mapspot5].framewidth),'|',get(plugin[mapspot5].frameheight));
			,
				set(plugin[mapspot5].blingCounter, 0)
			)
		);
		resetmapspot(mapspot5);
		if (%1 != mapspot6,
				if(plugin[mapspot6].animated,
				set(plugin[mapspot6].frame           , 0);
				set(plugin[mapspot6].ypos            , 0);
				set(plugin[mapspot6].animationCounter, 0)
				txtadd(plugin[mapspot6].crop,'0|0|',get(plugin[mapspot6].framewidth),'|',get(plugin[mapspot6].frameheight));
			,
				set(plugin[mapspot6].blingCounter, 0)
			)
		);
		resetmapspot(mapspot6);
		if (%1 != mapspot7,
				if(plugin[mapspot7].animated,
				set(plugin[mapspot7].frame           , 0);
				set(plugin[mapspot7].ypos            , 0);
				set(plugin[mapspot7].animationCounter, 0)
				txtadd(plugin[mapspot7].crop,'0|0|',get(plugin[mapspot7].framewidth),'|',get(plugin[mapspot7].frameheight));
			,
				set(plugin[mapspot7].blingCounter, 0)
			)
		);
		resetmapspot(mapspot7);
		if (%1 != mapspot8,
				if(plugin[mapspot8].animated,
				set(plugin[mapspot8].frame           , 0);
				set(plugin[mapspot8].ypos            , 0);
				set(plugin[mapspot8].animationCounter, 0)
				txtadd(plugin[mapspot8].crop,'0|0|',get(plugin[mapspot8].framewidth),'|',get(plugin[mapspot8].frameheight));
			,
				set(plugin[mapspot8].blingCounter, 0)
			)
		);
		resetmapspot(mapspot8);
		if (%1 != mapspot9,
				if(plugin[mapspot9].animated,
				set(plugin[mapspot9].frame           , 0);
				set(plugin[mapspot9].ypos            , 0);
				set(plugin[mapspot9].animationCounter, 0)
				txtadd(plugin[mapspot9].crop,'0|0|',get(plugin[mapspot9].framewidth),'|',get(plugin[mapspot9].frameheight));
			,
				set(plugin[mapspot9].blingCounter, 0)
			)
		);
		resetmapspot(mapspot9);
		if (%1 != mapspot10,
				if(plugin[mapspot10].animated,
				set(plugin[mapspot10].frame           , 0);
				set(plugin[mapspot10].ypos            , 0);
				set(plugin[mapspot10].animationCounter, 0)
				txtadd(plugin[mapspot10].crop,'0|0|',get(plugin[mapspot10].framewidth),'|',get(plugin[mapspot10].frameheight));
			,
				set(plugin[mapspot10].blingCounter, 0)
			)
		);
		resetmapspot(mapspot10);
		if (%1 != mapspot11,
				if(plugin[mapspot11].animated,
				set(plugin[mapspot11].frame           , 0);
				set(plugin[mapspot11].ypos            , 0);
				set(plugin[mapspot11].animationCounter, 0)
				txtadd(plugin[mapspot11].crop,'0|0|',get(plugin[mapspot11].framewidth),'|',get(plugin[mapspot11].frameheight));
			,
				set(plugin[mapspot11].blingCounter, 0)
			)
		);
		resetmapspot(mapspot11);
		if (%1 != mapspot12,
				if(plugin[mapspot12].animated,
				set(plugin[mapspot12].frame           , 0);
				set(plugin[mapspot12].ypos            , 0);
				set(plugin[mapspot12].animationCounter, 0)
				txtadd(plugin[mapspot12].crop,'0|0|',get(plugin[mapspot12].framewidth),'|',get(plugin[mapspot12].frameheight));
			,
				set(plugin[mapspot12].blingCounter, 0)
			)
		);
		resetmapspot(mapspot12);
		if (%1 != mapspot13,
				if(plugin[mapspot13].animated,
				set(plugin[mapspot13].frame           , 0);
				set(plugin[mapspot13].ypos            , 0);
				set(plugin[mapspot13].animationCounter, 0)
				txtadd(plugin[mapspot13].crop,'0|0|',get(plugin[mapspot13].framewidth),'|',get(plugin[mapspot13].frameheight));
			,
				set(plugin[mapspot13].blingCounter, 0)
			)
		);
		resetmapspot(mapspot13);
		if (%1 != mapspot14,
				if(plugin[mapspot14].animated,
				set(plugin[mapspot14].frame           , 0);
				set(plugin[mapspot14].ypos            , 0);
				set(plugin[mapspot14].animationCounter, 0)
				txtadd(plugin[mapspot14].crop,'0|0|',get(plugin[mapspot14].framewidth),'|',get(plugin[mapspot14].frameheight));
			,
				set(plugin[mapspot14].blingCounter, 0)
			)
		);
		resetmapspot(mapspot14);
		if (%1 != mapspot15,
				if(plugin[mapspot15].animated,
				set(plugin[mapspot15].frame           , 0);
				set(plugin[mapspot15].ypos            , 0);
				set(plugin[mapspot15].animationCounter, 0)
				txtadd(plugin[mapspot15].crop,'0|0|',get(plugin[mapspot15].framewidth),'|',get(plugin[mapspot15].frameheight));
			,
				set(plugin[mapspot15].blingCounter, 0)
			)
		);
		resetmapspot(mapspot15);
		if (%1 != mapspot16,
				if(plugin[mapspot16].animated,
				set(plugin[mapspot16].frame           , 0);
				set(plugin[mapspot16].ypos            , 0);
				set(plugin[mapspot16].animationCounter, 0)
				txtadd(plugin[mapspot16].crop,'0|0|',get(plugin[mapspot16].framewidth),'|',get(plugin[mapspot16].frameheight));
			,
				set(plugin[mapspot16].blingCounter, 0)
			)
		);
		resetmapspot(mapspot16);
		if (%1 != mapspot17,
				if(plugin[mapspot17].animated,
				set(plugin[mapspot17].frame           , 0);
				set(plugin[mapspot17].ypos            , 0);
				set(plugin[mapspot17].animationCounter, 0)
				txtadd(plugin[mapspot17].crop,'0|0|',get(plugin[mapspot17].framewidth),'|',get(plugin[mapspot17].frameheight));
			,
				set(plugin[mapspot17].blingCounter, 0)
			)
		);
		resetmapspot(mapspot17);
		if (%1 != mapspot18,
				if(plugin[mapspot18].animated,
				set(plugin[mapspot18].frame           , 0);
				set(plugin[mapspot18].ypos            , 0);
				set(plugin[mapspot18].animationCounter, 0)
				txtadd(plugin[mapspot18].crop,'0|0|',get(plugin[mapspot18].framewidth),'|',get(plugin[mapspot18].frameheight));
			,
				set(plugin[mapspot18].blingCounter, 0)
			)
		);
		resetmapspot(mapspot18);
	</action>
    <!-- Выделить конкретную точку карты -->
    <action name="selectmapspot">
		unselectmapspotsbutpassed(%1);
		if(plugin[%1].animated,
			inc(plugin[%1].animationCounter, 1);
			if(plugin[%1].animationCounter == 1,
				animatemapspot(%1, 0.1);
			);
		,
			inc(plugin[%1].blingCounter,1);
			if(plugin[%1].blingCounter == 1,
				blingmapspot(%1);
			);
		);
	</action>
    <!-- make map hotspots flash when selected (recursive action) -->
    <action name="blingmapspot">
		tween(plugin[%1].alpha, 0.0, 0.8, easeInSine  );
		tween(plugin[%1].scale, 1.5, 0.8, easeOutCubic);
		tween(, , 0.8, , resetmapspot(%1);
		if(plugin[%1].blingCounter &gt; 0, blingmapspot(%1);););
	</action>
    <action name="resetmapspot">
		set(plugin[%1].scale,1);
		set(plugin[%1].alpha,1);
	</action>
    <!--************** Контекстное меню ***********************************************************-->
    <contextmenu>
        <item name="item_0" caption="Виртуальные туры Panoramza" onclick="openurl(panoramza.com)"/>
        <item name="normal_view" caption="normal view" onclick="action(actionviewnormal)" separator="true"/>
        <item name="fisheye_view" caption="fisheye view" onclick="action(actionviewfisheye)"/>
        <item name="architectural_view" caption="architectural view" onclick="action(actionviewarchitectural)"/>
        <item name="stereographic_view" caption="stereographic view" onclick="action(actionviewstereographic)"/>
        <item name="pannini_view" caption="pannini view" onclick="action(actionviewpannini)"/>
        <item name="little_planet_view" caption="little planet view" onclick="action(actionviewlittleplanet)"/>
    </contextmenu>
    <action name="actionviewnormal">
		tween(view.fovmax,       150.0, distance(179, 1.00), easeoutquad);
		tween(view.architectural,  0.0, distance(1.0, 0.45), easeoutquad);
		tween(view.fisheye,        0.0, distance(1.0, 0.45), easeoutquad, set(view.stereographic,false); set(view.pannini,false); set(display.flash10,on); );
	</action>
    <action name="actionviewfisheye">
		set(display.flash10,off);
		tween(view.architectural, 0.0, distance(1.0, 0.30), easeoutquad);
		tween(view.fisheye,       0.0 ,distance(1.0, 0.30), easeoutquad, set(view.stereographic,false); set(view.pannini,false); set(view.fovmax,179); tween(view.fisheye, 0.35, distance(1.0,1.25)); );
	</action>
    <action name="actionviewarchitectural">
		tween(view.fovmax,       150.0, distance(179, 1.00), easeoutquad);
		tween(view.architectural,  1.0, distance(1.0, 0.45), easeoutquad);
		tween(view.fisheye,        0.0, distance(1.0, 0.45), easeoutquad, set(view.stereographic,false);set(view.pannini,false);set(display.flash10,on); );
	</action>
    <action name="actionviewstereographic">
		set(display.flash10,off);
		tween(view.architectural, 0.0, 0.25);
		set(backtonormalfirst,false);
		if(view.pannini       == true,  set(backtonormalfirst,true) );
		if(view.stereographic == false, set(backtonormalfirst,true) );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		set(view.pannini, false);
		set(view.stereographic, true);
		set(view.fovmax, 150);
		tween(view.fisheye, 1.0, distance(1.0, 0.75), easeoutquad);
	</action>
    <action name="actionviewpannini">
		set(display.flash10,off);
		tween(view.architectural, 0.0, 0.25);
		set(backtonormalfirst,false);
		if(view.pannini       == false, set(backtonormalfirst,true) );
		if(view.stereographic == false, set(backtonormalfirst,true) );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		set(view.pannini, true);
		set(view.stereographic, true);
		set(view.fovmax, 150);
		tween(view.fisheye, 1.0, distance(1.0, 0.75), easeoutquad);
	</action>
    <action name="actionviewlittleplanet">
		set(display.flash10,off);
		tween(view.architectural, 0.0, 0.25);
		tween(view.vlookat,  90, distance(179, 1.50), easeoutquad);
		set(backtonormalfirst,false);
		if(view.pannini       == true,  set(backtonormalfirst,true) );
		if(view.stereographic == false, set(backtonormalfirst,true) );
		if(backtonormalfirst, tween(view.fisheye, 0.0 ,distance(1.0, 0.25), easeoutquad, WAIT); );
		set(view.pannini, false);
		set(view.stereographic, true);
		set(view.fovmax, 150);
		tween(view.fisheye, 1.0, distance(1.0, 0.75), easeoutquad);
		tween(view.fov,     150, distance(179, 0.75), easeoutquad);
	</action>
    <action name="closeglobalobjects">
		closemap();
	</action>
    <!-- Raise sequence stopper and wait sequence time to break the delayed calls -->
    <action name="interruptAnimation">
		ifnot (stopSequence === undefined,
			set(stopSequence, true);
			wait(0);
		);
	</action>
</krpano>